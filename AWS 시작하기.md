



# AWS. IAM 계정으로 시작하기



## 0. 들어가며

회사에서 AWS 를 조금이나마 접하며 "정리 해야지... 정리해야지..." 했던 걸 기록해본다.

학부 때는 학교용 계정 만들고, 그냥 EC2 쓰는 정도 수준이었는데, 회사라는 실전에 와보니.. 기본 세팅부터 달랐다.
먼저 루트 계정을 사용하지 않고 IAM 계정을 사용한다.
그리고 이 IAM 계정에 로그인하여 AWS 작업들을 하곤 한다.

> 이렇게 **루트 계정과 IAM 계정을 나누어 이용하는 방법은 AWS 의 일반적인 권장사항이다.**
> 더 알고싶다면 [이 문서](https://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started_create-admin-group.html)를 참고하자.

일반적으로 회사의 인프라팀에서 회사의 AWS IAM 계정들을 관리한다.
그리고 개발팀은 인프라팀에게 계정 생성 요청을 한 뒤, IAM 계정을 받아 사용한다.
(물론 회사마다 케바케겠지만, 이게 일반적이지 않을까 싶다.)

이 글에서는 AWS 에서 제공하는 서비스를 사용하기 앞서, 루트 계정이 아닌 IAM 계정을 생성하고 로그인하는 과정을 다룬다.
사전 준비작업은 다음과 같다.

- AWS 일반 계정(루트 계정) 하나가 만들어져있다.
- 이 계정에 로그인된 상태다.

그럼 시작해보자.



> **[당부하는 글...]**
>
> 클라우드 벤더사의 UI 나 시스템은 꽤나 빠르게(그리고 자주...) 바뀌는 편이다.
> 이 글은 2020.06.28 에 쓰였다.
> 추후 분명히 바뀔 것이고, 이 글의 수명도 그렇게 길게 갈거라고 생각은 안든다.
>
> 그럼에도, 추후에 도움이 될거라 생각하여 써..본다. (사실 내가 삽질한게 아까워서 쓴다 ㅠ)



## 1. 그룹 설정

가장 먼저 해줘야할 일은 그룹설정이다.
그룹은 구체적인 IAM 사용자들을 담는다.
즉, 사용자 생성에 앞서 사용자들을 어떤 그룹으로 분리할지 먼저 큰 틀을 세운다고 보면 되겠다.



**서비스 > IAM > 그룹**  을 찾으면 다음 장면이 등장한다.

![image-20200627182658765](images/AWS 시작하기/image-20200627182658765.png)

새로운 그룹 생성 버튼을 누른다.



### 그룹 이름 설정

![image-20200627182909368](images/AWS 시작하기/image-20200627182909368.png)

그룹 이름을 써준다.
보통 사용자의 직무나 역할에 따라 그룹을 나누지만, 지금은 나 혼자 쓰는 계정이므로 관리자 역할을 하는 그룹을 만들기 위해 "Administrator" 라는 네이밍을 주었다.



### 정책 연결

![image-20200627182932470](images/AWS 시작하기/image-20200627182932470.png)



이 그룹 사용자에게 주어지는 정책을 연결한다.
정책은 일종의 권한인데, 사용자나 AWS 인스턴스에게 부여된다.
나는 AWS 의 관리자 권한인 `AdministatorAccess` 을 선택했다.



## 2. 사용자 설정

이제 만들어놓은 그룹에 사용자를 추가해보자.
만약 내가 회사의 인프라팀이었다면, 신입사원에게 여기서 계정을 만들어 메일로 보내주었을 것이다.

**서비스 > IAM > 사용자**  을 찾으면 다음 장면이 등장한다.

![image-20200627182401969](images/AWS 시작하기/image-20200627182401969.png)

사용자 추가 버튼을 누르자.



### 사용자 세부 정보 설정

![image-20200627182434078](images/AWS 시작하기/image-20200627182434078.png)

이름과 콘솔 비밀 번호는 알아서 잘 지정해주면 되고, 좀 주목해야할 건 액세스 유형인데, 이 사용자가 어떤 방식으로 로그인 하게끔 할 수 있는지 지정해줄 수 있다. 
`프로그래밍 방식 액세스` 는 후에 설치할 `awscli` 등으로 접근할 수 있는 방식으로, aws 에서 제공하는 `CLI` 환경의 라이브러리 등을 통해서 로그인할 수 있게 한다.
`AWS Management 액세스` 는 웹에서 로그인할 수 있게한다. 지금 우리가 보는 이 화면도 AWS Management console 이다.

아무튼 두 유형 모두 선택해주어, CLI 든 웹이든 접근할 수 있게 한다.



### 그룹에 사용자 추가

![image-20200627183041016](images/AWS 시작하기/image-20200627183041016.png)

이 사용자가 어떤 그룹에 속할지 정한다.
아까 만든 "Administrator" 그룹을 선택한다.



![image-20200627183107012](images/AWS 시작하기/image-20200627183107012.png)

위 과정을 잘 마무리하면 다음과 같이 성공했다는 페이지가 등장한다.
이 때, 액세스 키 ID 와 비밀 액세스 키가 등장하는데, 이는 `awscli` 에서 사용할 값으로 이 계정을 인증하는데 필요하다.
두 값 모두 메모장 같은 곳에 적어두자.



## 3. IAM 계정으로 로그인

이제 우리가 만든 IAM 계정으로 로그인해보자. 
그 전에, IAM 페이지 좌측 아래를 보면 12자리의 AWS 계정 ID가 있다. 나는 `049015989673` 로 되어있는데 이걸 기억해두자.

그리고 aws 로그아웃 한 뒤 다시 sign in 페이지로 들어간다.



![image-20200627190808842](images/AWS 시작하기/image-20200627190808842.png)

루트 사용자가 아닌 IAM 사용자를 체크한 뒤, 계정 ID 에 아까 IAM 페이지에서 본 12자리의 AWS 계정 ID 를 적어준다.



![image-20200627190828089](images/AWS 시작하기/image-20200627190828089.png)

그리고 이제 IAM 사용자 계정으로 로그인 하면 된다.



![image-20200627190909766](images/AWS 시작하기/image-20200627190909766.png)

정상적으로 로그인한 모습이다.
앞으로 루트 계정이 아닌 이 IAM 계정으로 로그인하여 사용하면 된다.