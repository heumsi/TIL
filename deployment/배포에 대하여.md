

브랜치 이름: develop -> master 로 찌르지말고, develop -> release -> master 순으로 배포 과정을 거치자.

- develop
    - dev 클러스터. dev 앱
    - feature/ 로 부터 들어옴.
    - 모든 개발 PR은 여기로 모임.
- release
    - prod 클러스터. stage 앱
    - develop 로 부터 들어옴.
    - 완성된 develop 은 여기로 모임. 
    - 실제 운영 환경에 배포 되기 전 prod 클러스터에서 dev 코드가 잘 도는지 확인용도
- master
    - prod 클러스터. prod 앱
    - release 로 부터 들어옴.
    - 실제 운영 중인 코드들이 여기로 모임.
    - 최대한 안정성있고, 안 건드려야하는 코드



다시 정리하면,

- 크게 개발 환경(클러스터) / 운영 환경(클러스터) 가 2개 있고,
- 개발 코드와 브랜치는 개발 클러스터에
- 스테이지 코드와 운영 코드는 운영 클러스터에 저장.
- 일반적으로 DB 정보 등 환경에 따라 달리지는 값들은 환경변수에 저장함.



근데 오늘 만난 이슈는...

- stage 단계에서 어떻게 테스트 해보지?????
- 만약 내 코드 로직에 DB 삽입 작업이 있을 경우, 정말 운영환경에서 돌아가는거 마냥 요청받으면 안되는데 (스테이지 더라도... 바라보는  DB 는 운영DB 고 요청떄문에 운영DB 에 Insert 하니깐) 어떻게 무엇을 체크해야할까???
- 오늘 나의 경우. 이렇게 DB 삽입하는 로직이 있었는데, 이를 직접적으로 테스트해볼 순 없었고.
- 스테이지에서 테스트해 볼 수 있는 메써드를 따로 만듬. 이 메써드는 운영 DB 가 잘 셋업 되어있는지 연결되는지 등을 확인함.
- Write 해서 확인하는게 아니고, Read 가 잘되면 확인됬다고, 나름 휴리스틱하게 확인 ;;;
- 근데 이 방법이 올바른건지 솔직히 나도 잘 모르겠다. 누가 제대로 알려줬으면.. 흠

